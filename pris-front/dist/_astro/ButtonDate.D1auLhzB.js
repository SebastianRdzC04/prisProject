import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.BVOCwoKb.js";import{g as d}from"./security.DPbZ2g5Y.js";import b from"./AppointmentModal._xVaYVRQ.js";const C=()=>{const[f,u]=s.useState(!1),[p,o]=s.useState(!1),[n,r]=s.useState(!1),[g,m]=s.useState(null),[a,i]=s.useState(!1);s.useEffect(()=>{const t=d();u(!!t&&t!=="3fa85f64-5717-4562-b3fc-2c963f66afa6")},[]);const h=async()=>{if(!f){o(!0),setTimeout(()=>o(!1),3e3);return}try{i(!0);const t=d()||"3fa85f64-5717-4562-b3fc-2c963f66afa6",l=await fetch(`https://apipris.kysedomi.lat/clients/user/${t}`);if(!l.ok)throw new Error("No se pudo obtener la información del cliente");const c=await l.json();console.log("ID del cliente:",c),m(c.id),r(!0)}catch(t){console.error("Error al obtener ID de cliente:",t),o(!0),setTimeout(()=>o(!1),3e3)}finally{i(!1)}},x=()=>{r(!1)};return e.jsxs(e.Fragment,{children:[p&&e.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded shadow-md z-50 transition-opacity",children:[e.jsx("p",{className:"font-bold",children:"Información requerida"}),e.jsx("p",{children:"Debe iniciar sesión para agendar una cita."})]}),e.jsx("button",{onClick:h,disabled:a,className:`px-4 py-2 ${a?"bg-gray-400":"bg-gray-800 hover:bg-gray-700"} text-white rounded-md focus:outline-none focus:ring-2 focus:ring-gray-700 focus:ring-offset-2 transition-colors`,children:a?"Cargando...":"Agendar nueva cita"}),n&&e.jsx(b,{isOpen:n,onClose:x,clientId:g})]})};export{C as default};
