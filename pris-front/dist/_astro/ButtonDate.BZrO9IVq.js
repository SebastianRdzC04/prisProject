import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.BVOCwoKb.js";import{g as d}from"./security.DPbZ2g5Y.js";import w from"./AppointmentModal._xVaYVRQ.js";const k=()=>{const[f,u]=s.useState(!1),[x,o]=s.useState(!1),[n,r]=s.useState(!1),[m,h]=s.useState(null),[a,i]=s.useState(!1);s.useEffect(()=>{const t=d();u(!!t&&t!=="3fa85f64-5717-4562-b3fc-2c963f66afa6")},[]);const p=async()=>{if(!f){o(!0),setTimeout(()=>o(!1),3e3);return}try{i(!0);const t=d()||"3fa85f64-5717-4562-b3fc-2c963f66afa6",l=await fetch(`https://apipris.kysedomi.lat/clients/user/${t}`);if(!l.ok)throw new Error("No se pudo obtener la información del cliente");const c=await l.json();console.log("ID del cliente:",c),h(c.id),r(!0)}catch(t){console.error("Error al obtener ID de cliente:",t),o(!0),setTimeout(()=>o(!1),3e3)}finally{i(!1)}},g=()=>{r(!1)};return e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded shadow-md z-50 transition-opacity",children:[e.jsx("p",{className:"font-bold",children:"Información requerida"}),e.jsx("p",{children:"Debe iniciar sesión para agendar una cita."})]}),e.jsxs("button",{onClick:p,disabled:a,className:"inline-flex items-center justify-center rounded-md bg-[#44c7d7] hover:bg-[#44c7d7]/90 text-white shadow-md px-6 py-3 text-sm font-medium transition-all",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-5 w-5",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),a?"Cargando...":"Agendar Cita"]}),n&&e.jsx(w,{isOpen:n,onClose:g,clientId:m})]})};export{k as default};
