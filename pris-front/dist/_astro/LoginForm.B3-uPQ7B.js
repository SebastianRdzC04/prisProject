import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.BVOCwoKb.js";function x(){const[i,u]=r.useState(""),[n,p]=r.useState(""),[o,l]=r.useState(!1),[a,c]=r.useState({show:!1,type:"",message:""}),d=(s,t)=>{c({show:!0,type:s,message:t}),setTimeout(()=>{c({show:!1,type:"",message:""})},3e3)},h=async s=>{s.preventDefault(),l(!0);try{const t=await fetch("https://apipris.kysedomi.lat/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:n})}),m=await t.json();if(!t.ok)throw new Error(m.message||"Error al iniciar sesión");localStorage.setItem("token",m.token),d("success","Bienvenido al sistema del consultorio médico"),window.location.href="/"}catch(t){d("error",t.message||"Ocurrió un error al iniciar sesión")}finally{l(!1)}};return e.jsxs("div",{children:[a.show&&e.jsx("div",{className:`p-3 mb-4 rounded-lg text-sm ${a.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.message}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electrónico"}),e.jsx("input",{id:"email",type:"email",placeholder:"correo@ejemplo.com",value:i,onChange:s=>u(s.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contraseña"}),e.jsx("input",{id:"password",type:"password",value:n,onChange:s=>p(s.target.value),required:!0,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx("button",{type:"submit",disabled:o,className:`w-full py-2 px-4 bg-gray-800 text-white rounded-md hover:bg-gray-700 transition-colors ${o?"opacity-70 cursor-not-allowed":""}`,children:o?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Cargando..."]}):"Iniciar Sesión"})]})]})}export{x as default};
