---
import LoginForm from '../components/react-components/pages/LoginForm'
import RegisterForm from '../components/react-components/pages/RegisterComponent';
import LayoutAuth from "../layouts/LayoutAuth.astro";
---

<LayoutAuth title="Autenticación | BIORA">
    <div class="flex min-h-screen items-center justify-center bg-[#faf9f5] py-12 px-4 sm:px-6 lg:px-8">
        <div class="w-full max-w-md rounded-xl shadow-lg overflow-hidden relative">
            <!-- Decorative elements -->
            <div class="absolute -left-8 -top-8 w-32 h-32 rounded-full bg-[#76c86e]/20 -z-10"></div>
            <div class="absolute -right-8 -bottom-8 w-32 h-32 rounded-full bg-[#44c7d7]/20 -z-10"></div>
            
            <div class="bg-white p-8 rounded-xl">
                <header class="text-center mb-8">
                    <h1 class="text-3xl font-bold tracking-tight">
                        <span class="text-[#76c86e]">B</span> 
                        <span class="text-[#44c7d7]">I</span> 
                        <span class="text-[#76c86e]">O</span> 
                        <span class="text-[#44c7d7]">R</span> 
                        <span class="text-[#76c86e]">A</span>
                    </h1>
                    <p class="mt-2 text-slate-600">Medicina Natural para tu Bienestar</p>
                </header>

                <div class="form-container">
                    <div class="flex mb-6">
                        <button id="login-tab" class="tab active flex-1 py-3 font-medium text-center focus:outline-none transition-colors rounded-tl-lg rounded-bl-lg">
                            Iniciar Sesión
                        </button>
                        <button id="register-tab" class="tab flex-1 py-3 font-medium text-center focus:outline-none transition-colors rounded-tr-lg rounded-br-lg">
                            Registrarse
                        </button>
                    </div>

                    <div id="login-form" class="form-panel active">
                        <LoginForm client:load />
                    </div>

                    <div id="register-form" class="form-panel">
                        <RegisterForm client:load />
                    </div>
                </div>
                
                <div class="mt-8 text-center">
                    <a href="/" class="text-[#44c7d7] hover:text-[#44c7d7]/80 text-sm flex items-center justify-center gap-1 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                        Volver a Inicio
                    </a>
                </div>
            </div>
        </div>
    </div>
</LayoutAuth>

<style>
    .tab {
        color: #94a3b8;
        background-color: #f8fafc;
        border: 1px solid #e2e8f0;
    }

    .tab.active {
        color: white;
        background: linear-gradient(to right, #76c86e, #44c7d7);
        border: none;
    }

    .form-panel {
        display: none;
    }

    .form-panel.active {
        display: block;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Verificar si hay token y redirigir al inicio si existe
        const token = localStorage.getItem('token');
        if (token) {
            window.location.href = '/';
            return;
        }

        // Script para manejar las pestañas
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');

        if (loginTab && registerTab && loginForm && registerForm) {
            loginTab.addEventListener('click', () => {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
            });

            registerTab.addEventListener('click', () => {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.classList.add('active');
                loginForm.classList.remove('active');
            });
        }
    });
</script>